{{- $src := partial "utils/lib.html" (dict "$" . "type" "medium-zoom") -}}
<script src="{{ $src }}" defer onload="initMediumZoom()"></script>
<script>
    function initMediumZoom() {
        if (typeof mediumZoom !== 'function') return;
        let imgNodes = document.querySelectorAll('div.post-body img');
        imgNodes = Array.from(imgNodes).filter(node => node.parentNode.tagName !== "A");

        mediumZoom(imgNodes, {
            background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
        })
    }
</script>
